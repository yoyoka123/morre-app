# EggEmail (Morre) 项目 - 未实现点击功能分析与规划

## 项目概述

**项目名称**: EggEmail (Morre)
**项目类型**: AI 陪伴应用 - 移动端 Web App
**技术栈**: Next.js 16 + React 19 + Tailwind CSS 4
**设计风格**: 移动优先 (max-w-md)，温暖米色背景 (#F8F6F1)，圆角卡片设计

---

## 待实现功能清单与产品规划

### 一、主页 (`src/app/page.tsx`)

#### 1.1 编辑角色昵称按钮 ✅
- **位置**: 第 65 行，角色名"明日香"旁边的编辑笔图标
- **规划行为**: 点击后弹出编辑弹窗
- **产品形态**:
  ```
  ┌─────────────────────────────┐
  │       修改角色昵称          │
  │ ┌─────────────────────────┐ │
  │ │ 明日香                  │ │
  │ └─────────────────────────┘ │
  │     (输入框，最多8个字符)     │
  │                             │
  │    [取消]        [确认]     │
  └─────────────────────────────┘
  ```
  - 类型: 中心模态弹窗
  - 包含: 输入框、取消/确认按钮
  - 验证: 非空、字符长度限制

#### ~~1.2 录音按钮~~ ❌ 已更新样式，无需实现

#### ~~1.3 歌声按钮~~ ❌ 无需实现

#### 1.4 "100件小事"卡片 ✅
- **位置**: 第 132-178 行
- **规划行为**: 点击展开/收起卡片（当文字被缩略时）
- **产品形态**:
  - 类型: 原地展开动画
  - 默认状态: 文字显示2行，带省略号
  - 展开状态: 显示全部文字内容
  - 交互: 点击切换展开/收起
  ```
  收起状态:
  ┌───────────────────────────────┐
  │  和TA的100件小事               │
  │  刚好附近有枫叶街道，大概只有... │
  └───────────────────────────────┘

  展开状态:
  ┌───────────────────────────────┐
  │  和TA的100件小事               │
  │  刚好附近有枫叶街道，大概只有   │
  │  几百米哦~ 要不要一起去看看，   │
  │  我可以给你带路，现在正是最美   │
  │  的季节呢！                    │
  └───────────────────────────────┘
  ```

#### 1.5 "认知画像"卡片 ✅
- **位置**: 第 180-191 行
- **规划行为**: 点击进入认知画像详情页
- **产品形态**:
  ```
  ┌─────────────────────────────┐
  │      ← 认知画像              │
  │                             │
  │  ┌───────────────────────┐  │
  │  │   雷达图/标签云        │  │
  │  │   展示用户特征         │  │
  │  └───────────────────────┘  │
  │                             │
  │  职业: 上班族               │
  │  作息: 早出晚归             │
  │  饮食: 无规律               │
  │  特点: 偶尔出差             │
  │  ...                        │
  └─────────────────────────────┘
  ```
  - 类型: 新页面 `/profile`
  - 包含: 用户画像可视化、标签列表

#### 1.6 "每日来信"卡片 ✅
- **位置**: 第 193-214 行
- **规划行为**: 点击跳转到该信件详情页
- **产品形态**: 跳转到 `/letter/[id]` 详情页

---

### 二、信件详情页 (`src/app/letter/[id]/page.tsx`)

#### 2.1 语音播放按钮 ✅
- **位置**: 第 36-38 行，右上角 Play 按钮
- **规划行为**: 点击朗读信件内容 (TTS)
- **产品形态**:
  ```
  点击后:
  - 按钮变为暂停图标
  - 底部出现播放进度条
  ┌─────────────────────────────┐
  │  ━━━━━●━━━━━━  02:30/05:00  │
  └─────────────────────────────┘
  - 朗读完成后自动恢复
  ```
  - 功能: TTS 语音合成朗读信件

---

### 三、设备设置页 (`src/app/device/page.tsx`)

#### ~~3.1 添加设备按钮 (+)~~ ❌ 暂不实现

#### 3.2 消息通知设置 ✅
- **位置**: 第 95-99 行
- **规划行为**: 点击进入消息通知设置页面
- **产品形态**:
  ```
  ┌─────────────────────────────┐
  │      ← 消息通知              │
  │                             │
  │  ┌───────────────────────┐  │
  │  │ 开启通知         [开关] │  │
  │  └───────────────────────┘  │
  │                             │
  │  ────── 通知时间段 ──────    │
  │  (仅在开启通知时显示)        │
  │                             │
  │  开始时间                   │
  │  ┌───────────────────────┐  │
  │  │ 09:00              ▼  │  │
  │  └───────────────────────┘  │
  │                             │
  │  结束时间                   │
  │  ┌───────────────────────┐  │
  │  │ 22:00              ▼  │  │
  │  └───────────────────────┘  │
  │                             │
  │  ───────────────────────    │
  │  重复                       │
  │  ┌───────────────────────┐  │
  │  │  一 二 三 四 五 六 日   │  │
  │  │  ●  ●  ●  ●  ●  ○  ○   │  │
  │  └───────────────────────┘  │
  │                             │
  │         [保存]              │
  └─────────────────────────────┘
  ```
  - 类型: 新页面 `/device/notification`
  - 功能:
    - 开关: 开启/关闭通知
    - 时间选择器: iOS 风格滚轮选择器
    - 重复日期: 类似 iOS 闹钟的星期选择
  - 交互参考: iOS 闹钟设置

#### 3.3 电子说明书 ✅
- **位置**: 第 114-117 行
- **规划行为**: 跳转到电子说明书页面
- **产品形态**:
  ```
  ┌─────────────────────────────┐
  │      ← 电子说明书            │
  │                             │
  │  ┌───────────────────────┐  │
  │  │   [设备图片]           │  │
  │  └───────────────────────┘  │
  │                             │
  │  Morre 设备使用指南         │
  │  ────────────────────────   │
  │                             │
  │  1. 开机与配对              │
  │  长按电源键3秒开机...       │
  │                             │
  │  2. 基本操作                │
  │  轻触唤醒，长按对话...       │
  │                             │
  │  3. 充电说明                │
  │  使用附赠充电线...          │
  │                             │
  │  4. 常见问题                │
  │  Q: 无法连接？              │
  │  A: 请确保蓝牙已开启...      │
  │                             │
  └─────────────────────────────┘
  ```
  - 类型: 新页面 `/device/manual`
  - 内容: 占位说明文字

#### 3.4 解绑设备 ✅
- **位置**: 第 119-122 行
- **规划行为**: 点击弹出解绑确认弹窗
- **产品形态**:
  ```
  ┌─────────────────────────────┐
  │         解绑设备             │
  │                             │
  │  确定要解绑设备"薇薇安"吗？   │
  │                             │
  │  解绑后将清除该设备所有数据   │
  │                             │
  │   [取消]       [确认解绑]   │
  └─────────────────────────────┘
  ```
  - 类型: 中心模态确认弹窗
  - 确认后: 删除设备数据，返回设备列表

---

### 四、我的设备列表页 (`src/app/device/list/page.tsx`)

#### ~~4.1 添加设备按钮 (+)~~ ❌ 暂不实现

#### 4.2 设备切换逻辑 ✅
- **位置**: 第 51-54 行 `handleDeviceClick`
- **当前状态**: 仅 console.log 占位
- **规划行为**:
  1. 切换当前活动设备
  2. 更新状态管理中的 currentDevice
  3. 显示切换成功 Toast
  4. 返回上一页

---

### 五、录音文件页 (`src/app/device/recordings/page.tsx`)

#### 5.1 下载录音功能 ✅
- **位置**: 第 57-61 行 `handleDownload`
- **当前状态**: 仅 console.log 占位
- **规划行为**:
  1. 调用下载 API
  2. 显示下载进度
  3. 保存到本地/相册
- **产品形态**:
  ```
  下载中...
  ┌─────────────────────────────┐
  │  ━━━━━━━━━━●━━━━  67%       │
  └─────────────────────────────┘

  下载成功 Toast:
  ┌─────────────────────────────┐
  │  ✓ 已保存到本地              │
  └─────────────────────────────┘
  ```

---

### 六、设置页 (`src/app/settings/page.tsx`)

#### 6.1 编辑用户名按钮 ✅
- **位置**: 第 66-68 行
- **规划行为**: 点击弹出编辑弹窗
- **产品形态**: 与主页编辑角色昵称类似的中心模态弹窗

#### 6.2 订阅会员按钮 ✅
- **位置**: 第 78 行
- **规划行为**: 点击进入会员订阅页面
- **产品形态**:
  ```
  ┌─────────────────────────────┐
  │      ← Morre 会员            │
  │                             │
  │  ┌───────────────────────┐  │
  │  │  🌟 月度会员           │  │
  │  │  ¥19.9/月             │  │
  │  │  ☑ 无限畅聊           │  │
  │  │  ☑ 加强记忆           │  │
  │  └───────────────────────┘  │
  │                             │
  │  ┌───────────────────────┐  │
  │  │  💎 年度会员           │  │
  │  │  ¥199/年 (省¥40)      │  │
  │  │  ☑ 全部权益           │  │
  │  └───────────────────────┘  │
  │                             │
  │       [立即订阅]            │
  └─────────────────────────────┘
  ```
  - 类型: 新页面 `/subscription`
  - 功能: 会员套餐选择、支付

#### 6.3 反馈与帮助 ✅
- **位置**: 第 98 行
- **规划行为**: 跳转到帮助中心页面
- **产品形态**:
  - 类型: 新页面 `/help`
  - 包含: FAQ 列表、使用教程、联系客服入口

#### 6.4 反馈邮箱 ✅
- **位置**: 第 100 行
- **规划行为**: 点击复制邮箱地址
- **产品形态**:
  - Toast: "邮箱已复制"

#### 6.5 关于星崽 ✅
- **位置**: 第 102 行
- **规划行为**: 跳转到关于页面
- **产品形态**:
  ```
  ┌─────────────────────────────┐
  │      ← 关于星崽              │
  │                             │
  │          🥚                 │
  │        Morre               │
  │      版本 1.0.0             │
  │                             │
  │  星崽是一款 AI 陪伴应用...   │
  │                             │
  │  官网: www.morre.com        │
  │  微博: @星崽Morre           │
  └─────────────────────────────┘
  ```
  - 类型: 新页面 `/about`

#### 6.6 隐私政策 ✅
- **位置**: 第 107 行
- **规划行为**: 跳转到隐私政策页面
- **产品形态**: 新页面 `/legal/privacy` 或外链

#### 6.7 用户协议 ✅
- **位置**: 第 109 行
- **规划行为**: 跳转到用户协议页面
- **产品形态**: 新页面 `/legal/terms` 或外链

#### 6.8 个人信息收集清单 ✅
- **位置**: 第 111 行
- **规划行为**: 跳转到信息收集说明页
- **产品形态**: 新页面 `/legal/data-collection` 或外链

#### 6.9 第三方信息共享清单 ✅
- **位置**: 第 113 行
- **规划行为**: 跳转到第三方共享说明页
- **产品形态**: 新页面 `/legal/third-party` 或外链

#### 6.10 注销账号 ✅
- **位置**: 第 115 行
- **规划行为**: 点击进入注销流程
- **产品形态**:
  ```
  ┌─────────────────────────────┐
  │      ← 注销账号              │
  │                             │
  │  ⚠️ 注销账号后：             │
  │                             │
  │  • 所有数据将被永久删除      │
  │  • 无法恢复账号和数据        │
  │  • 会员权益将失效           │
  │                             │
  │  请输入手机号确认:          │
  │  ┌─────────────────────────┐│
  │  │                         ││
  │  └─────────────────────────┘│
  │                             │
  │  [取消]    [确认注销]       │
  └─────────────────────────────┘
  ```
  - 类型: 新页面 `/account/delete`
  - 需要: 二次确认、输入验证

#### 6.11 退出登录按钮 ✅
- **位置**: 第 120-122 行
- **规划行为**: 点击弹出确认弹窗
- **产品形态**:
  ```
  ┌─────────────────────────────┐
  │                             │
  │     确定要退出登录吗？       │
  │                             │
  │   [取消]       [确认退出]   │
  └─────────────────────────────┘
  ```
  - 类型: 中心模态确认弹窗
  - 确认后: 清除登录状态，跳转到登录页

---

## 实现优先级

### P0 - 核心功能 (必须实现)
| 功能 | 页面 | 类型 | 文件路径 |
|------|------|------|---------|
| 退出登录 | settings | 弹窗确认 | `src/app/settings/page.tsx` |
| 注销账号 | settings | 新页面 | 新建 `src/app/account/delete/page.tsx` |
| 订阅会员 | settings | 新页面 | 新建 `src/app/subscription/page.tsx` |
| 设备切换 | device/list | 状态更新 | `src/app/device/list/page.tsx` |
| 解绑设备 | device | 弹窗确认 | `src/app/device/page.tsx` |

### P1 - 重要功能 (建议实现)
| 功能 | 页面 | 类型 | 文件路径 |
|------|------|------|---------|
| 编辑用户名/昵称 | settings, page | 弹窗 | 现有页面 |
| 消息通知设置 | device | 新页面 | 新建 `src/app/device/notification/page.tsx` |
| 下载录音 | device/recordings | 功能完善 | `src/app/device/recordings/page.tsx` |
| 语音朗读信件 | letter/[id] | TTS | `src/app/letter/[id]/page.tsx` |
| 电子说明书 | device | 新页面 | 新建 `src/app/device/manual/page.tsx` |

### P2 - 扩展功能 (可选实现)
| 功能 | 页面 | 类型 | 文件路径 |
|------|------|------|---------|
| 认知画像详情 | page | 新页面 | 新建 `src/app/profile/page.tsx` |
| 100件小事展开 | page | 展开动画 | `src/app/page.tsx` |
| 每日来信点击 | page | 跳转 | `src/app/page.tsx` |

### P3 - 法律合规 (后续实现)
| 功能 | 页面 | 类型 | 文件路径 |
|------|------|------|---------|
| 隐私政策 | settings | 外链/页面 | 新建 `src/app/legal/privacy/page.tsx` |
| 用户协议 | settings | 外链/页面 | 新建 `src/app/legal/terms/page.tsx` |
| 信息收集清单 | settings | 外链/页面 | 新建 `src/app/legal/data-collection/page.tsx` |
| 第三方共享清单 | settings | 外链/页面 | 新建 `src/app/legal/third-party/page.tsx` |
| 关于星崽 | settings | 新页面 | 新建 `src/app/about/page.tsx` |
| 反馈与帮助 | settings | 新页面 | 新建 `src/app/help/page.tsx` |

---

## 需要创建的新页面

| 路径 | 名称 | 优先级 |
|------|------|--------|
| `/subscription` | 会员订阅页 | P0 |
| `/account/delete` | 注销账号页 | P0 |
| `/device/notification` | 消息通知设置页 | P1 |
| `/device/manual` | 电子说明书页 | P1 |
| `/profile` | 认知画像详情页 | P2 |
| `/about` | 关于星崽页 | P3 |
| `/help` | 反馈与帮助页 | P3 |
| `/legal/privacy` | 隐私政策页 | P3 |
| `/legal/terms` | 用户协议页 | P3 |
| `/legal/data-collection` | 个人信息收集清单页 | P3 |
| `/legal/third-party` | 第三方信息共享清单页 | P3 |

## 需要创建的共享组件

| 组件名 | 用途 | 使用位置 |
|--------|------|---------|
| `Modal` | 通用模态弹窗 | 编辑名称、解绑确认、退出登录等 |
| `Toast` | 轻提示 | 复制邮箱、下载成功、切换设备等 |
| `TimePicker` | iOS 风格时间选择器 | 消息通知设置 |
| `WeekdayPicker` | 星期选择器 | 消息通知设置 |

---

## 统计摘要

| 类别 | 数量 |
|------|------|
| 待实现的点击事件 | 18 个 |
| 需要新建的页面 | 11 个 |
| 需要新建的组件 | 4 个 |
| 暂不实现的功能 | 3 个 (录音、歌声、添加设备) |
